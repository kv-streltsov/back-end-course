  > Homework 9  Devices  GET -> "/security/devices": should not change device id after call /auth/refresh-token. LastActiveDate should be changed; status 200; content: device list;

    expect(received).toHaveLength(expected)

    Expected length: 4
    Received length: 5
    Received array:
    [
    {"deviceId": "5b09fdc2-5ab0-467e-80dc-27587daaa1c1",
    "ip": "3.69.49.83", "lastActiveDate": "2023-06-14T05:13:32.000Z",
    "title": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36"},
     {"deviceId": "24ced387-41ad-458e-a024-e7b630c9a09a", "ip": "3.69.49.83", "lastActiveDate": "2023-06-14T05:13:33.000Z", "title": "Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:105.0) Gecko/20100101 Firefox/103.0"}, {"deviceId": "10960fff-a05c-478e-be3d-f418fdff2f52", "ip": "3.69.49.83", "lastActiveDate": "2023-06-14T05:13:33.000Z", "title": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36"}, {"deviceId": "d150c11f-9678-4963-9e66-3de0ece16ef5", "ip": "3.69.49.83", "lastActiveDate": "2023-06-14T05:13:33.000Z", "title": "Mozilla/5.0 (Macintosh; Intel Mac OS X 12_6) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.6 Safari/605.1.15"}, {"deviceId": "71022dc4-2432-4b02-ac9b-3840729bf282", "ip": "3.69.49.83", "lastActiveDate": "2023-06-14T05:13:36.000Z", "title": "axios/1.3.4"}]

      323 |
      324 |       expect(devicesList).toBeStrictObjectsArray(securityDeviceSchema);
    > 325 |       expect(devicesList).toHaveLength(LOGGED_DEVICES_COUNT);
          |                           ^
      326 |       expect(devicesList).toStrictEqual(
      327 |         expect.arrayContaining([
      328 |           expect.objectContaining({ deviceId: chrome105DeviceIdBeforeRefresh }),

      at Object.<anonymous> (src/tests/jest/back/describes/devices/devices-describe.ts:325:27)
          at runMicrotasks (<anonymous>)

  > Homework 9  Devices  DELETE -> "/security/devices/deviceId": should delete device from device list by deviceId; status 204;  used additional methods: GET => /security/devices;

    expect(received).toHaveLength(expected)

    Expected length: 4
    Received length: 5
    Received array:  [{"deviceId": "5b09fdc2-5ab0-467e-80dc-27587daaa1c1", "ip": "3.69.49.83", "lastActiveDate": "2023-06-14T05:13:32.000Z", "title": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36"}, {"deviceId": "24ced387-41ad-458e-a024-e7b630c9a09a", "ip": "3.69.49.83", "lastActiveDate": "2023-06-14T05:13:33.000Z", "title": "Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:105.0) Gecko/20100101 Firefox/103.0"}, {"deviceId": "10960fff-a05c-478e-be3d-f418fdff2f52", "ip": "3.69.49.83", "lastActiveDate": "2023-06-14T05:13:33.000Z", "title": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36"}, {"deviceId": "d150c11f-9678-4963-9e66-3de0ece16ef5", "ip": "3.69.49.83", "lastActiveDate": "2023-06-14T05:13:33.000Z", "title": "Mozilla/5.0 (Macintosh; Intel Mac OS X 12_6) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.6 Safari/605.1.15"}, {"deviceId": "71022dc4-2432-4b02-ac9b-3840729bf282", "ip": "3.69.49.83", "lastActiveDate": "2023-06-14T05:13:36.000Z", "title": "axios/1.3.4"}]

      370 |
      371 |       expect(devicesListAfterDelete).toBeStrictObjectsArray(securityDeviceSchema);
    > 372 |       expect(devicesList).toHaveLength(LOGGED_DEVICES_COUNT);
          |                           ^
      373 |       expect(devicesListAfterDelete.length + 1).toBe(devicesList.length);
      374 |
      375 |       //should not contain deleted device

      at Object.<anonymous> (src/tests/jest/back/describes/devices/devices-describe.ts:372:27)
          at runMicrotasks (<anonymous>)

  > Homework 9  Devices  GET -> "/security/devices": should return device list without a device logged out; status 204;  used additional methods: POST => /auth/logout;

    expect(received).toBe(expected) // Object.is equality

    Expected: 5
    Received: 6

      406 |       );
      407 |
    > 408 |       expect(devicesListAfterLogout.length + 1).toBe(devicesList.length);
          |                                                 ^
      409 |
      410 |       expect(devicesListAfterLogout).toBeStrictObjectsArray(securityDeviceSchema);
      411 |       expect(devicesListAfterLogout).toStrictEqual(

      at Object.<anonymous> (src/tests/jest/back/describes/devices/devices-describe.ts:408:49)
          at runMicrotasks (<anonymous>)

  > Homework 9  Devices  DELETE -> "/security/devices": should delete all other devices from device list; status 204;  used additional methods: GET => /security/devices;



    Expected: success response

    Received: Request failed with status code 401

    Config:
     url: security/devices
     method: get
     response status: 401
     request body: undefined
     response data: "Unauthorized"

      22 |     };
      23 |
    > 24 |     expect(mappedError).printError(description);
         |                         ^
      25 |   }
      26 |
      27 |   throw new Error(error.message);

      at handleTestError (src/tests/jest/back/testHelpers/handleTestError.ts:24:25)
      at src/tests/jest/back/describes/devices/devices-describe.ts:442:35
          at runMicrotasks (<anonymous>)
      at Object.<anonymous> (src/tests/jest/back/describes/devices/devices-describe.ts:441:48)
